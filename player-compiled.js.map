{"version":3,"sources":["player.js"],"names":[],"mappings":";;;;;;AAAA,IAAM,wzCAAN;;IA2DM,M;AACJ;;;;AAIA,oBAAc;AAAA;;AACZ,SAAK,EAAL,GAAU,KAAK,gBAAL,CAAsB,IAAtB,CAAV;AACA,SAAK,SAAL,GAAiB,SAAS,aAAT,CAAuB,SAAvB,CAAjB;AACA,SAAK,OAAL,GAAe,SAAS,aAAT,CAAuB,QAAvB,CAAf;AACA,SAAK,MAAL,GAAc,KAAK,KAAL,CAAW,MAAX,EAAmB,MAAjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;AAED;AACA;;;;;qCACiB,Q,EAAU;AACzB,UAAM,QAAQ,OAAO,QAAP,CAAgB,MAAhB,CAAuB,SAAvB,CAAiC,CAAjC,CAAd;AACA,UAAM,OAAO,MAAM,KAAN,CAAY,GAAZ,CAAb;AACA,WAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,KAAK,CAAtC,EAAyC;AACvC,YAAM,OAAO,KAAK,CAAL,EAAQ,KAAR,CAAc,GAAd,CAAb;AACA,YAAI,KAAK,CAAL,MAAY,QAAhB,EAA0B;AAAE,iBAAO,KAAK,CAAL,CAAP;AAAiB;AAC9C;AACD,aAAQ,KAAR;AACD;;AAED;;;;;;;2BAIO;AACL,UAAM,QAAQ,KAAK,MAAL,CAAY,KAAK,EAAjB,CAAd;;AAEA,UAAM,QAAQ,SAAS,aAAT,CAAuB,OAAvB,CAAd;AACA,YAAM,YAAN,CAAmB,KAAnB,EAA0B,MAAM,KAAhC;AACA;AACA,YAAM,YAAN,CAAmB,UAAnB,EAA+B,MAA/B;AACA,WAAK,SAAL,CAAe,OAAf,CAAuB,KAAvB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACD;;AAED;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAGF,SAAS,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAM,SAAS,IAAI,MAAJ,EAAf;AACA,SAAO,IAAP;AACD,CAHD","file":"player-compiled.js","sourcesContent":["const videos = `{\n  \"videos\": [\n    {\n      \"id\": 1,\n      \"title\": \"Lego!\",\n      \"created\": 1509804047011,\n      \"duration\": 5,\n      \"poster\": \"./videos/small.png\",\n      \"video\": \"./videos/small.mp4\"\n    },\n    {\n      \"id\": 2,\n      \"title\": \"Big Bunny\",\n      \"created\": 1507804047011,\n      \"duration\": 62,\n      \"poster\": \"./videos/bunny.png\",\n      \"video\": \"./videos/bunny.mp4\"\n    },\n    {\n      \"id\": 3,\n      \"title\": \"Prufu myndband\",\n      \"created\": 1505904047011,\n      \"duration\": 3600,\n      \"poster\": \"./videos/16-9.png\",\n      \"video\": \"./videos/bunny.mp4\"\n    },\n    {\n      \"id\": 4,\n      \"title\": \"Prufu myndband með löngum texta sem fer í tvær línur\",\n      \"created\": 1504904047011,\n      \"duration\": 220,\n      \"poster\": \"./videos/16-9.png\",\n      \"video\": \"./videos/bunny.mp4\"\n    },\n    {\n      \"id\": 5,\n      \"title\": \"Gaflari í sundi\",\n      \"created\": 1504904047011,\n      \"duration\": 212,\n      \"poster\": \"./videos/gaflari.png\",\n      \"video\": \"./videos/rickrolled.mp4\"\n    }\n  ],\n  \"categories\": [\n    {\n      \"title\": \"Nýleg myndbönd\",\n      \"videos\": [1, 2, 5]\n    },\n    {\n      \"title\": \"Kennslumyndbönd\",\n      \"videos\": [1, 3, 4]\n    },\n    {\n      \"title\": \"Skemmtimyndbönd\",\n      \"videos\": [2, 3, 4]\n    }\n  ]\n}`;\n\nclass Player {\n  /**\n   * Finnur container fyrir myndbönd og form.\n   * Bindur submit eventhandler við form.\n   */\n  constructor() {\n    this.id = this.getQueryVariable('id');\n    this.container = document.querySelector('.player');\n    this.toolbar = document.querySelector('.tools');\n    this.videos = JSON.parse(videos).videos;\n\n    // gamala\n    //    this.keyName = 'countdown';\n    //    this.container = document.querySelector('.countdown');\n    //    this.form = document.querySelector('form');\n    //\n    //    // til þess að submit hafi þennan klasa sem \"this\" verðum við\n    //    // að nota bind hér (og í öðrum föllum sem við bindum!)\n    //    this.form.addEventListener('submit', this.submit.bind(this));\n  }\n\n  // tekið af 'https://css-tricks.com/snippets/javascript/get-url-variables/'\n  // gerir það sem það segir að það geri\n  getQueryVariable(variable) {\n    const query = window.location.search.substring(1);\n    const vars = query.split('&');\n    for (let i = 0; i < vars.length; i += 1) {\n      const pair = vars[i].split('=');\n      if (pair[0] === variable) { return pair[1]; }\n    }\n    return (false);\n  }\n\n  /**\n   * Sækir gögn úr video.json og býr til alla viðeigandi containera\n   * og thumbnails\n   */\n  load() {\n    const video = this.videos[this.id];\n\n    const vidEl = document.createElement('video');\n    vidEl.setAttribute('src', video.video);\n    // vidEl.setAttribute('autoplay','True');\n    vidEl.setAttribute('controls', 'True');\n    this.container.prepend(vidEl);\n\n    // const savedData = window.localStorage.getItem(this.keyName);\n\n    //    if (savedData) {\n    //      const parsed = JSON.parse(savedData);\n    //      const date = new Date(parsed.date);\n    //\n    //      this.create(parsed.title, date);\n    //    }\n  }\n\n  /**\n   * Tekur við title sem streng og date sem Date hlut\n   * Vistar sem json gögn í localStorage undir this.keyName\n   */\n  //  save(title, date) {\n  //    const data = { title, date };\n  //    const json = JSON.stringify(data);\n  //\n  //    window.localStorage.setItem(this.keyName, json);\n  //  }\n  //\n  //  /**\n  //   * Handler fyrir submit á formi.\n  //   * Sækir gögn úr formi og kallar í this.parseDate()\n  //   * Vistar gögn með this.save() og sýnir niðurteljara með this.create()\n  //   */\n  //  submit(e) {\n  //    e.preventDefault();\n  //\n  //    const title = this.form.querySelector('input[type=text]');\n  //    const dags = this.form.querySelector('input[type=date]');\n  //    const time = this.form.querySelector('input[type=time]');\n  //    const date = this.parseDate(dags.value, time.value);\n  //\n  //    console.log('titill er', title.value);\n  //    console.log('date er', date.toString());\n  //\n  //    this.save(title.value, date);\n  //\n  //    this.load();\n  //  }\n  //\n  //  /**\n  //   * Tekur við:\n  //   *  - date sem streng á forminu \"yyyy-mm-dd\", t.d. \"2017-11-06\"\n  //   *  - time sem streng á forminu \"hh:mm\", t.d. \"09:00\"\n  //   * Skilar date hlut með gögnum úr date og time\n  //   */\n  //  parseDate(date, time) {\n  //    return new Date(`${date}T${time}:00`);\n  //  }\n  //\n  //  /**\n  //   * Býr til element fyrir niðurteljara og bætir við this.container\n  //   * Setur this.date sem dagsetningu sem talið er niður að\n  //   * Setur this.element sem element sem geymir niðurteljara\n  //   * Bætir við \"eyða\" takka sem sér um að eyða niðurteljara með this.delete\n  //   * Byrjar niðurteljara með this.startCounter() og\n  //   * felur form með this.hideForm()\n  //   */\n  //  create(title, date) {\n  //    this.date = date;\n  //\n  //    const h2 = document.createElement('h2');\n  //    h2.appendChild(document.createTextNode(title));\n  //    h2.classList.add('countdown__heading');\n  //    this.container.appendChild(h2);\n  //\n  //    const countdown = document.createElement('div');\n  //    this.container.appendChild(countdown);\n  //    this.element = countdown;\n  //\n  //    const deleteButton = document.createElement('button');\n  //    deleteButton.appendChild(document.createTextNode('Eyda'));\n  //    deleteButton.classList.add('button');\n  //    deleteButton.addEventListener('click', this.delete.bind(this));\n  //    this.container.appendChild(deleteButton);\n  //\n  //    this.startCounter();\n  //    this.hideForm();\n  //  }\n  //\n  //  /**\n  //   * Felur form með CSS\n  //   */\n  //  hideForm() {\n  //    this.form.classList.add('form__hidden');\n  //  }\n  //\n  //  /**\n  //   * Sýnir form með CSS\n  //   */\n  //  showForm() {\n  //    this.form.classList.remove('form__hidden');\n  //  }\n  //\n  //  /**\n  //   * Byrjar niðurteljara með this.count() og keyrir á 1000ms fresti\n  //   * með window.setInterval og setur id á teljara í this.interval\n  //   */\n  //  startCounter() {\n  //    this.count();\n  //    this.interval = window.setInterval(this.count.bind(this), 1000);\n  //  }\n  //\n  //  /**\n  //   * Stöðvar teljara með window.clearInterval á this.interval\n  //   */\n  //  stopCounter() {\n  //    window.clearInterval(this.interval);\n  //  }\n  //\n  //  /**\n  //   * Býr til element sem heldur utan um teljara, á forminu:\n  //   * <div class=\"countdown__box\">\n  //   *   <span class=\"countdown__num\">num</span>\n  //   *   <span class=\"countdown__title\">title</span>\n  //   * </div>\n  //   * og skilar element\n  //   */\n  //  createElement(num, title) {\n  //    const el = document.createElement('div');\n  //    el.classList.add('countdown__box');\n  //\n  //    const numEl = document.createElement('span');\n  //    numEl.classList.add('countdown__num');\n  //    numEl.appendChild(document.createTextNode(num));\n  //    el.appendChild(numEl);\n  //\n  //    const titleEl = document.createElement('span');\n  //    titleEl.classList.add('countdown__title');\n  //    titleEl.appendChild(document.createTextNode(title));\n  //    el.appendChild(titleEl);\n  //\n  //    return el;\n  //  }\n  //\n  //  /**\n  //   * Eyðir niðurteljara með því að fjarlægja úr localStorage og\n  //   * fjarlægja allt úr this.container.\n  //   * Kallar líka í this.stopCounter() og this.showForm()\n  //   */\n  //  delete() {\n  //    window.localStorage.removeItem(this.keyName);\n  //\n  //    this.stopCounter();\n  //    this.showForm();\n  //\n  //    while (this.container.firstChild) {\n  //      this.container.removeChild(this.container.firstChild);\n  //    }\n  //  }\n  //\n  //  /**\n  //   * Tekur við remaining sem eru millisekúndur í dagsetningu sem talið er\n  //   * niður í.\n  //   * Útbýr og skilar element sem inniheldur element fyrir daga, klukkustundir,\n  //   * mínútur og sekúndur þar til remaining gerist. Hver „partur“ er búinn til\n  //   * með kalli í this.createElement\n  //   */\n  //  countdown(remaining) {\n  //    const totalSecs = remaining / 1000;\n  //\n  //    const days = Math.floor(totalSecs / (60 * 60 * 24));\n  //    const hours = Math.floor(totalSecs / (60 * 60)) % 24;\n  //    const mins = Math.floor((totalSecs / 60) % 60);\n  //    const secs = Math.floor(totalSecs % 60);\n  //\n  //    const container = document.createElement('div');\n  //    container.classList.add('countdown__container');\n  //\n  //    container.appendChild(this.createElement(days, 'Dagar'));\n  //    container.appendChild(this.createElement(hours, 'Klst'));\n  //    container.appendChild(this.createElement(mins, 'Min'));\n  //    container.appendChild(this.createElement(secs, 'Sek'));\n  //\n  //    return container;\n  //  }\n  //\n  //  /**\n  //   * Telur niður.\n  //   * Fjarlægir allt úr this.element (ef eitthvað er þar) og athugar síðan hvort\n  //   * this.date (dagsetning sem talið er niður að) sé liðin og ef svo er birtir\n  //   * textann \"Komið!\" og stoppa teljara með this.stopCounter()\n  //   * Ef ekki liðið uppfærir teljara með því að bæta element úr this.countdown()\n  //   * við this.element\n  //   */\n  //  count() {\n  //    if (this.element.firstChild) {\n  //      this.element.removeChild(this.element.firstChild);\n  //    }\n  //\n  //    const diff = this.date - new Date();\n  //\n  //    if (diff <= 0) {\n  //      this.element.appendChild(document.createTextNode('Komid!'));\n  //      this.stopCounter();\n  //    } else {\n  //      const countdown = this.countdown(diff);\n  //      this.element.appendChild(countdown);\n  //    }\n  //  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const player = new Player();\n  player.load();\n});\n"]}