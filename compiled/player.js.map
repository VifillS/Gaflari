{"version":3,"sources":["../scripts/player.js"],"names":["videos","Player","id","getQueryVariable","container","document","querySelector","JSON","parse","video","variable","query","window","location","search","substring","vars","split","i","length","pair","headEl","createElement","appendChild","createTextNode","title","setAttribute","prepend","vidEl","poster","getElementById","addEventListener","playPause","bind","muteUnmute","fullscreen","forward","back","paused","play","classList","remove","pause","add","muted","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","currentTime","player","load"],"mappings":"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","file":"player.js","sourcesContent":["const videos = `{\n  \"videos\": [\n    {\n      \"id\": 1,\n      \"title\": \"Lego!\",\n      \"created\": 1509804047011,\n      \"duration\": 5,\n      \"poster\": \"./videos/small.png\",\n      \"video\": \"./videos/small.mp4\"\n    },\n    {\n      \"id\": 2,\n      \"title\": \"Big Bunny\",\n      \"created\": 1507804047011,\n      \"duration\": 62,\n      \"poster\": \"./videos/bunny.png\",\n      \"video\": \"./videos/bunny.mp4\"\n    },\n    {\n      \"id\": 3,\n      \"title\": \"Prufu myndband\",\n      \"created\": 1505904047011,\n      \"duration\": 3600,\n      \"poster\": \"./videos/16-9.png\",\n      \"video\": \"./videos/bunny.mp4\"\n    },\n    {\n      \"id\": 4,\n      \"title\": \"Prufu myndband með löngum texta sem fer í tvær línur\",\n      \"created\": 1504904047011,\n      \"duration\": 220,\n      \"poster\": \"./videos/16-9.png\",\n      \"video\": \"./videos/bunny.mp4\"\n    },\n    {\n      \"id\": 5,\n      \"title\": \"Gaflari í sundi\",\n      \"created\": 1504904047011,\n      \"duration\": 212,\n      \"poster\": \"./videos/gaflari.png\",\n      \"video\": \"./videos/rickrolled.mp4\"\n    }\n  ],\n  \"categories\": [\n    {\n      \"title\": \"Nýleg myndbönd\",\n      \"videos\": [1, 2, 5]\n    },\n    {\n      \"title\": \"Kennslumyndbönd\",\n      \"videos\": [1, 3, 4]\n    },\n    {\n      \"title\": \"Skemmtimyndbönd\",\n      \"videos\": [2, 3, 4]\n    }\n  ]\n}`;\n\nclass Player {\n\n  constructor() {\n    this.id = this.getQueryVariable('id');\n    this.container = document.querySelector('.video');\n    this.videos = JSON.parse(videos).videos;\n    this.video;\n  }\n\n  // tekið af 'https://css-tricks.com/snippets/javascript/get-url-variables/'\n  // gerir það sem það segir að það geri\n  getQueryVariable(variable) {\n    const query = window.location.search.substring(1);\n    const vars = query.split('&');\n    for (let i = 0; i < vars.length; i += 1) {\n      const pair = vars[i].split('=');\n      if (pair[0] === variable) { return pair[1]; }\n    }\n    return (false);\n  }\n\n  /**\n   * Sækir gögn úr video.json og býr til alla viðeigandi containera\n   * og thumbnails\n   */\n  load() {\n    const video = this.videos[this.id - 1];\n\n    const headEl = document.createElement('h1');\n    headEl.appendChild(document.createTextNode(video.title));\n    headEl.setAttribute('class','title');\n    document.querySelector('main').prepend(headEl);\n\n    const vidEl = document.createElement('video');\n    vidEl.setAttribute('src', video.video);\n    vidEl.setAttribute('poster', video.poster);\n    //vidEl.setAttribute('controls', 'True');\n    this.video = vidEl;\n    this.container.appendChild(vidEl);\n\n    // setja eventlistenera\n    document.getElementById('playPause').addEventListener(\"click\", this.playPause.bind(this));\n    this.container.addEventListener(\"click\", this.playPause.bind(this));\n    document.getElementById('muteUnmute').addEventListener(\"click\", this.muteUnmute.bind(this));\n    document.getElementById('fullscreen').addEventListener(\"click\", this.fullscreen.bind(this));\n    document.getElementById('forward').addEventListener(\"click\", this.forward.bind(this));\n    document.getElementById('back').addEventListener(\"click\", this.back.bind(this));\n  }\n\n  // TODO setja video sem class attibute\n\n  playPause() {\n    if (this.video.paused) {\n      this.video.play();\n      document.getElementById('playPause').setAttribute('src','./img/pause.svg');\n      this.container.classList.remove('pause')\n    } else {\n      this.video.pause();\n      document.getElementById('playPause').setAttribute('src','./img/play.svg');\n      this.container.classList.add('pause')\n    }\n  }\n\n  muteUnmute() {\n    if (this.video.muted) {\n      this.video.muted = false;\n      document.getElementById('muteUnmute').setAttribute('src','./img/mute.svg');\n    } else {\n      this.video.muted = true;\n      document.getElementById('muteUnmute').setAttribute('src','./img/unmute.svg');\n    }\n  }\n\n  // tekid af netinu - endurskoda en samt ekki\n  // http://blog.teamtreehouse.com/building-custom-controls-for-html5-videos\n  fullscreen() {\n    if (this.video.requestFullscreen) {\n      this.video.requestFullscreen();\n    } else if (this.video.mozRequestFullScreen) {\n      this.video.mozRequestFullScreen(); // Firefox\n    } else if (this.video.webkitRequestFullscreen) {\n      this.video.webkitRequestFullscreen(); // Chrome and Safari\n    }\n  }\n\n  forward() {\n    this.video.currentTime += 3;\n  }\n\n  back() {\n    this.video.currentTime -= 3;\n  }\n\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const player = new Player();\n  player.load();\n});\n"]}