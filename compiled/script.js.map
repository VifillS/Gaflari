{"version":3,"sources":["../scripts/script.js"],"names":["Video","container","document","querySelector","data","url","window","location","href","concat","request","XMLHttpRequest","open","responseType","onload","response","createCategory","showError","onerror","console","log","send","value","divEl","createElement","classList","add","el","appendChild","createTextNode","date","seconds","Math","floor","Date","years","months","weeks","days","hours","minutes","toString","n","duration","mins","secs","m","minTwoDigits","s","t","category","categories","Object","keys","forEach","addElements","key","id","videos","title","find","item","poster","created","separator","image","thumbnail","mynd","setAttribute","time","innerHTML","parseDuration","description","titleEl","dateEl","parseDate","box","addEventListener","video","load"],"mappings":"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","file":"script.js","sourcesContent":["class Video {\n  /**\n   * Finnur container fyrir myndbönd.\n   */\n  constructor() {\n    this.container = document.querySelector('.videolist');\n    this.data = null;\n    this.url = window.location.href.concat('video.html?id=');\n  }\n\n  /**\n   * Sækir gögn úr videos.json og býr til alla viðeigandi containera\n   * og thumbnails\n   */\n  load() {\n    const request = new XMLHttpRequest();\n    request.open('GET', '/videos.json');\n    request.responseType = 'json';\n    request.onload = () => {\n      this.data = request.response;\n      if (this.data !== null) {\n        this.createCategory(this.data);\n      } else {\n        this.showError('Gat ekki hlaðið gögnum');\n      }\n    };\n    request.onerror = () => {\n      this.showError('Gat ekki hlaðið gögnum');\n      console.log(this.container);\n    };\n    request.send();\n  }\n\n  showError(value) {\n    const divEl = document.createElement('div');\n    divEl.classList.add('videolist__error');\n    const el = document.createElement('h2');\n    el.classList.add('videolist__error__text');\n    el.appendChild(document.createTextNode(value));\n    divEl.appendChild(el);\n    this.container.appendChild(divEl);\n  }\n  /**\n   * Tekur við:\n   *  - date sem tölu í millisek\n   * Skilar streng sem lýsir hversu gamall hluturinn er\n   */\n  parseDate(date) {\n    const seconds = Math.floor((new Date() - date) / 1000);\n    const years = Math.floor(seconds / (60 * 60 * 24 * 365));\n    const months = Math.floor(seconds / (60 * 60 * 24 * 30));\n    const weeks = Math.floor(seconds / (60 * 60 * 24 * 7));\n    const days = Math.floor(seconds / (60 * 60 * 24));\n    const hours = Math.floor(seconds / (60 * 60));\n    const minutes = Math.floor(seconds / 60);\n    if (years > 1) {\n      return ('Fyrir ').concat(years.toString().concat(' árum síðan'));\n    }\n    if (years === 1) {\n      return ('Fyrir ').concat(years.toString().concat(' ári síðan'));\n    }\n    if (months > 1) {\n      return ('Fyrir ').concat(months.toString().concat(' mánuðum síðan'));\n    }\n    if (months === 1) {\n      return ('Fyrir ').concat(months.toString().concat(' mánuði síðan'));\n    }\n    if (weeks > 1) {\n      return ('Fyrir ').concat(weeks.toString().concat(' vikum síðan'));\n    }\n    if (weeks === 1) {\n      return ('Fyrir ').concat(weeks.toString().concat(' viku síðan'));\n    }\n    if (days > 1) {\n      return ('Fyrir ').concat(days.toString().concat(' dögum síðan'));\n    }\n    if (days === 1) {\n      return ('Fyrir ').concat(days.toString().concat(' degi síðan'));\n    }\n    if (hours > 1) {\n      return ('Fyrir ').concat(hours.toString().concat(' klukkustundum síðan'));\n    }\n    if (hours === 1) {\n      return ('Fyrir ').concat(hours.toString().concat(' klukkustund síðan'));\n    }\n    if (minutes >= 1) {\n      return minutes.toString().concat(' mínutur');\n    }\n    return Math.floor(seconds).toString().concat(' sekúndur');\n  }\n\n  /**\n   * Hjálparfall fyrir parseDuration sem fær inn heiltölu n\n   * og skilar henni aftur ef hún er stærri en 10 annars\n   * bætist 0 framan á hana.\n   */\n  minTwoDigits(n) {\n    return (n < 10 ? '0' : '') + n;\n  }\n\n  /**\n   * Tekur við:\n   *  - sekúndum\n   * Skilar streng sem inniheldur lengdina\n   * (HH:mm:ss) eða (mm:ss) eða (m:ss)\n   */\n  parseDuration(duration) {\n    const hours = Math.floor(duration / (60 * 60));\n    const mins = Math.floor((duration / 60) % 60);\n    const secs = Math.floor(duration % 60);\n\n    const m = this.minTwoDigits(mins);\n    const s = this.minTwoDigits(secs);\n    const t = m.concat(':', s);\n\n    if (hours > 0) {\n      return hours.toString().concat(':', t);\n    }\n    return mins.toString().concat(':', s);\n  }\n\n  /**\n   * Býr til container sem heldur utan um flokka\n   */\n  createCategory(data) {\n    const category = data.categories;\n    Object.keys(category).forEach(key =>\n      this.container.appendChild(this.addElements(this.data, category[key])));\n  }\n\n  // TODO -- útfæra þannig að lengd myndbandsins sjáist\n\n  /**\n   * Býr til container sem heldur utan um myndbönd í flokki\n   */\n  addElements(data, category) {\n    const id = category.videos;\n    const el = document.createElement('div');\n    el.classList.add('videolist__container');\n\n    const title = document.createElement('h1');\n    title.classList.add('videolist__heading');\n    title.appendChild(document.createTextNode(category.title));\n    el.appendChild(title);\n\n    const videos = document.createElement('div');\n    videos.classList.add('videolist__videos');\n\n    id.forEach(key =>\n      videos.appendChild(this.createElement(\n        this.data.videos.find(item => item.id === key).title,\n        this.data.videos.find(item => item.id === key).poster,\n        this.data.videos.find(item => item.id === key).created,\n        this.data.videos.find(item => item.id === key).duration,\n        key,\n      )));\n    const separator = document.createElement('div');\n    separator.classList.add('videolist__separator');\n    el.appendChild(videos);\n    el.appendChild(separator);\n    return el;\n  }\n  /**\n   * Býr til container sem inniheldur:\n   *   - Poster fyrir myndband\n   *   - lengdina á myndbandinu\n   *   - titil myndbandsins\n   *   - hversu langt er síðan það var sett inn\n   * <div class=\"videolist__box\">\n   *   <a href=url class=\"videolist__tag\">\n   *   <div class=\"videolist__thumbnail\">\n   *     <img class= \"videolist__thumbnail__img\" src=image>\n   *     <span class=\"videolist__thumbnail__duration\">duration</span>\n   *   <thumbnail>\n   *   <div class=\"videolist__description\">\n   *     <h2 class=\"videolist__description__title\">title</h2>\n   *     <p class=\"videolist__description__added\">added</p>\n   *   </div>\n   *   </a>\n   * </div>\n   */\n  createElement(title, image, date, duration, id) {\n    const el = document.createElement('a');\n    el.classList.add('videolist__tag');\n    el.href = this.url + id;\n    const thumbnail = document.createElement('div');\n    thumbnail.classList.add('videolist__thumbnail');\n\n    const mynd = document.createElement('img');\n    mynd.classList.add('videolist__thumbnail__img');\n    mynd.setAttribute('src', image);\n    thumbnail.appendChild(mynd);\n\n    const time = document.createElement('span');\n    time.classList.add('videolist__thumbnail__duration');\n    time.innerHTML = this.parseDuration(duration);\n    thumbnail.appendChild(time);\n\n    el.appendChild(thumbnail);\n\n    const description = document.createElement('div');\n    description.classList.add('videolist__description');\n\n    const titleEl = document.createElement('h2');\n    titleEl.classList.add('videolist__description__title');\n    titleEl.appendChild(document.createTextNode(title));\n    description.appendChild(titleEl);\n    const dateEl = document.createElement('span');\n    dateEl.classList.add('videolist__description__added');\n    dateEl.appendChild(document.createTextNode(this.parseDate(date)));\n    description.appendChild(dateEl);\n\n    el.appendChild(description);\n    const box = document.createElement('div');\n    box.classList.add('videolist__box');\n    box.appendChild(el);\n\n    return box;\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const video = new Video();\n  video.load();\n});\n"]}