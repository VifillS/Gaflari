{"version":3,"sources":["../scripts/script.js"],"names":["Video","container","document","querySelector","data","url","window","location","href","concat","request","XMLHttpRequest","open","responseType","onload","response","createCategory","send","date","seconds","Math","floor","Date","years","months","weeks","days","hours","minutes","toString","n","duration","mins","secs","m","minTwoDigits","s","t","category","categories","Object","keys","forEach","appendChild","addElements","key","id","videos","el","createElement","classList","add","title","createTextNode","find","item","poster","created","separator","image","thumbnail","mynd","setAttribute","time","innerHTML","parseDuration","description","titleEl","dateEl","parseDate","box","addEventListener","video","load"],"mappings":"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","file":"script.js","sourcesContent":["class Video {\n  /**\n   * Finnur container fyrir myndbönd.\n   */\n  constructor() {\n    this.container = document.querySelector('.videolist');\n    this.data = null;\n    this.url = window.location.href.concat('video.html?id=');\n  }\n\n  /**\n   * Sækir gögn úr videos.json og býr til alla viðeigandi containera\n   * og thumbnails\n   */\n  load() {\n    const request = new XMLHttpRequest();\n    request.open('GET', '/videos.json');\n    request.responseType = 'json';\n    request.onload = () => {\n      this.data = request.response;\n      this.createCategory(this.data);\n    };\n    request.send();\n  }\n\n  /**\n   * Tekur við:\n   *  - date sem tölu í millisek\n   * Skilar streng sem lýsir hversu gamall hluturinn er\n   */\n  parseDate(date) {\n    const seconds = Math.floor((new Date() - date) / 1000);\n    const years = Math.floor(seconds / (60 * 60 * 24 * 365));\n    const months = Math.floor(seconds / (60 * 60 * 24 * 30));\n    const weeks = Math.floor(seconds / (60 * 60 * 24 * 7));\n    const days = Math.floor(seconds / (60 * 60 * 24));\n    const hours = Math.floor(seconds / (60 * 60));\n    const minutes = Math.floor(seconds / 60);\n    if (years > 1) {\n      return ('Fyrir ').concat(years.toString().concat(' árum síðan'));\n    }\n    if (years === 1) {\n      return ('Fyrir ').concat(years.toString().concat(' ári síðan'));\n    }\n    if (months > 1) {\n      return ('Fyrir ').concat(months.toString().concat(' mánuðum síðan'));\n    }\n    if (months === 1) {\n      return ('Fyrir ').concat(months.toString().concat(' mánuði síðan'));\n    }\n    if (weeks > 1) {\n      return ('Fyrir ').concat(weeks.toString().concat(' vikum síðan'));\n    }\n    if (weeks === 1) {\n      return ('Fyrir ').concat(weeks.toString().concat(' viku síðan'));\n    }\n    if (days > 1) {\n      return ('Fyrir ').concat(days.toString().concat(' dögum síðan'));\n    }\n    if (days === 1) {\n      return ('Fyrir ').concat(days.toString().concat(' degi síðan'));\n    }\n    if (hours > 1) {\n      return ('Fyrir ').concat(hours.toString().concat(' klukkustundum síðan'));\n    }\n    if (hours === 1) {\n      return ('Fyrir ').concat(hours.toString().concat(' klukkustund síðan'));\n    }\n    if (minutes >= 1) {\n      return minutes.toString().concat(' mínutur');\n    }\n    return Math.floor(seconds).toString().concat(' sekúndur');\n  }\n\n  /**\n   * Hjálparfall fyrir parseDuration sem fær inn heiltölu n\n   * og skilar henni aftur ef hún er stærri en 10 annars\n   * bætist 0 framan á hana.\n   */\n  minTwoDigits(n) {\n    return (n < 10 ? '0' : '') + n;\n  }\n\n  /**\n   * Tekur við:\n   *  - sekúndum\n   * Skilar streng sem inniheldur lengdina\n   * (HH:mm:ss) eða (mm:ss) eða (m:ss)\n   */\n  parseDuration(duration) {\n    const hours = Math.floor(duration / (60 * 60));\n    const mins = Math.floor((duration / 60) % 60);\n    const secs = Math.floor(duration % 60);\n\n    const m = this.minTwoDigits(mins);\n    const s = this.minTwoDigits(secs);\n    const t = m.concat(':', s);\n\n    if (hours > 0) {\n      return hours.toString().concat(':', t);\n    }\n    return mins.toString().concat(':', s);\n  }\n\n  /**\n   * Býr til container sem heldur utan um flokka\n   */\n  createCategory(data) {\n    const category = data.categories;\n    Object.keys(category).forEach(key =>\n      this.container.appendChild(this.addElements(this.data, category[key])));\n  }\n\n  // TODO -- útfæra þannig að lengd myndbandsins sjáist\n\n  /**\n   * Býr til container sem heldur utan um myndbönd í flokki\n   */\n  addElements(data, category) {\n    const id = category.videos;\n    const el = document.createElement('div');\n    el.classList.add('videolist__container');\n\n    const title = document.createElement('h1');\n    title.classList.add('videolist__heading');\n    title.appendChild(document.createTextNode(category.title));\n    el.appendChild(title);\n\n    const videos = document.createElement('div');\n    videos.classList.add('videolist__videos');\n\n    id.forEach(key =>\n      videos.appendChild(this.createElement(\n        this.data.videos.find(item => item.id === key).title,\n        this.data.videos.find(item => item.id === key).poster,\n        this.data.videos.find(item => item.id === key).created,\n        this.data.videos.find(item => item.id === key).duration,\n        key,\n      )));\n    const separator = document.createElement('div');\n    separator.classList.add('videolist__separator');\n    el.appendChild(videos);\n    el.appendChild(separator);\n    return el;\n  }\n  /**\n   * Býr til container sem inniheldur:\n   *   - Poster fyrir myndband\n   *   - lengdina á myndbandinu\n   *   - titil myndbandsins\n   *   - hversu langt er síðan það var sett inn\n   * <div class=\"videolist__box\">\n   *   <a href=url class=\"videolist__tag\">\n   *   <div class=\"videolist__thumbnail\">\n   *     <img class= \"videolist__thumbnail__img\" src=image>\n   *     <span class=\"videolist__thumbnail__duration\">duration</span>\n   *   <thumbnail>\n   *   <div class=\"videolist__description\">\n   *     <h2 class=\"videolist__description__title\">title</h2>\n   *     <p class=\"videolist__description__added\">added</p>\n   *   </div>\n   *   </a>\n   * </div>\n   */\n  createElement(title, image, date, duration, id) {\n    const el = document.createElement('a');\n    el.classList.add('videolist__tag');\n    el.href = this.url + id;\n    const thumbnail = document.createElement('div');\n    thumbnail.classList.add('videolist__thumbnail');\n\n    const mynd = document.createElement('img');\n    mynd.classList.add('videolist__thumbnail__img');\n    mynd.setAttribute('src', image);\n    thumbnail.appendChild(mynd);\n\n    const time = document.createElement('span');\n    time.classList.add('videolist__thumbnail__duration');\n    time.innerHTML = this.parseDuration(duration);\n    thumbnail.appendChild(time);\n\n    el.appendChild(thumbnail);\n\n    const description = document.createElement('div');\n    description.classList.add('videolist__description');\n\n    const titleEl = document.createElement('h2');\n    titleEl.classList.add('videolist__description__title');\n    titleEl.appendChild(document.createTextNode(title));\n    description.appendChild(titleEl);\n    const dateEl = document.createElement('span');\n    dateEl.classList.add('videolist__description__added');\n    dateEl.appendChild(document.createTextNode(this.parseDate(date)));\n    description.appendChild(dateEl);\n\n    el.appendChild(description);\n    const box = document.createElement('div');\n    box.classList.add('videolist__box');\n    box.appendChild(el);\n\n    return box;\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const video = new Video();\n  video.load();\n});\n"]}